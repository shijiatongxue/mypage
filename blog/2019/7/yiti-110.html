<!DOCTYPE html>
<html lang="ch">
    <head>
        <link rel="icon" href="https://shijiatongxue.github.io/images/sj.png" type="image/png">
        <link rel="shortcut icon" href="https://shijiatongxue.github.io/images/sj.png" type="image/png">
        <link rel="stylesheet" href="https://shijiatongxue.github.io/styles/article.css">
        <title>壹题110：编程题，请写一个函数，完成以下功能。</title>
    </head>
    <body>
        <!-- 输入文章类别：JavaScript -->
        <article>
            <h1>壹题110：编程题，请写一个函数，完成以下功能。</h1>
            <p class="info">作者：石嘉</p>
            <p class="info">日期：2019年7月21日</p>
            <p class="info">参考：<a href="https://github.com/Advanced-Frontend/Daily-Interview-Question">壹题</a></p>
            <p class="info">参考：<a href="https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/201#issuecomment-513696412">pre1ude</a></p>
            <h2>题目</h2>
            <pre>
                <code class="language-text">
                    输入：'1,2,3,5,7,8,10'
                    输出：'1~3,5,7~8,10'
                </code>
            </pre>
            <h2>解题</h2>
            <pre>
                <code class="language-javascript">
                    function fc(str){
                        var arr = str.split(',').map(x=>Number(x));
                        var res = [];
                        var i=0, l=0, r=0, len=arr.length;
                        while (i < len) {
                            l = r = i;
                            while (arr[i+1] === arr[i] + 1){
                                r = ++i;
                            }
                            value = l&lt;r ? arr[l]+'~'+arr[r] : +arr[l];
                            res.push(value);
                            i++;
                        }
                        return res.join(',');
                    }                    
                </code>
            </pre>
            <h2>分析</h2>
            <p>在JavaScript中，数组下标越位并不会报错，而会返回undefined，所以在arr[i+1]部分不用考虑超过数组下标报错的问题。</p>
            <p>在代码中，l和r分别保存i的上一个位置和当前位置。下面进入循环进行分析：</p>
            <ul>
                <li>如果当前位置的下一位大于1，则i向右移动，直到下一位为undefined或不符合条件；</li>
                <li>跳出while循环后，判断r所在的位置是不是大于l所在的位置，如果是，则往数组添加'num1~num2'，否则添加'num'；</li>
                <li>添加完毕之后，i需要继续向后移动，进入下一个循环。</li>
            </ul>
            <p>（完）</p>
        </article>
        <script src="https://shijiatongxue.github.io/js/prism.js"></script>
    </body>
</html>